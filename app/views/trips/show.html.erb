<p id="notice"><%= notice %></p>

<div class="<%= "finished" if @trip.goal %>">
<p>
  <strong>Title:</strong>
  <%= @trip.title %>
</p>

<p>
  <strong>Country:</strong>
  <%= @trip.country %>
</p>

<p>
  <strong>City:</strong>
  <%= @trip.city %>
</p>

<p>
  <strong>Start on:</strong>
  <%= @trip.start_on %>
</p>

<p>
  <strong>Finish on:</strong>
  <%= @trip.finish_on %>
</p>

<p>
  <strong>Flexible:</strong>
  <% if @trip.flexible %>
    日程変更可能
  <% end %>
</p>

<p>
  <strong>Description:</strong>
  <%= @trip.description %>
</p>

<p>
  <strong>Goal:</strong>
  <% if @trip.goal %>
    終了
  <% else %>
    募集中
  <% end %>
</p>

<p>
  <strong>User:</strong>
  <%= @trip.user.name %>
</p>

<!---favorite--->
<% unless @trip.user_id == current_user.id %>
  <% if @favorite.present? %>
    <%= link_to 'お気に入り済み', favorite_path(id: @favorite.id), method: :delete, class: 'btn btn-danger' %>
  <% else %>
    <%= link_to 'お気に入りする', favorites_path(trip_id: @trip.id), method: :post, class: 'btn btn-primary' %>
  <% end %>
<% end %>
<%= @trip.favorites.count %>人がお気に入り

<!---member--->
<% unless @trip.user_id == current_user.id %>
  <% if @member.present? %>
    <%= link_to '参加中！！', member_path(id: @member.id), method: :delete, class: 'btn btn-danger' %>
  <% else %>
    <%= link_to '一緒に旅をする', members_path(trip_id: @trip.id, as: 1), method: :post, class: 'btn btn-primary' %>
    <%= link_to 'ローカルとして参加', members_path(trip_id: @trip.id, as: 2), method: :post, class: 'btn btn-primary' %>
  <% end %>
<% end %>
<%= @members.count %>人が参加中(visiter:<%= @members.where(as: 1).count %>,local:<%= @members.where(as: 2).count %>)

<% @members.each do |member| %>
  <%= link_to profile_path(member.user.id) do %>
    <%= member.user.name %>
  <% end %>
<% end %>

<!---goal--->
<% if @trip.user.id == current_user.id %>
  <% if @trip.goal %>
    <%= link_to "再開する", change_goal_trip_path(goal: false), method: :post, class: 'btn btn-sm btn-danger' %>
  <% else %>
    <%= link_to "終了する", change_goal_trip_path(goal: true), method: :post, class: 'btn btn-sm btn-primary' %>
  <% end %>
<% end %>

<!-- 似ている掲示板-->
<h4>You might also like </h4>
<p><%= @trip.country %>行きの他の旅行</p>
<% @similar.each do |similar| %>
  <%= link_to trip_path(similar.id) do %>
    <%= similar.title %>
  <% end %> /
<% end %>

<!-- コメント一覧-->
<div class="comment_area">
  <p>Comments</p>
  <!-- このcomments_areaというHTMLのidを取得して、このdivの中にあるHTMLの要素をJavaScript（Ajax）で書き換え -->
  <div id="comments_area">
    <!-- 投稿されたコメント一覧をブログの詳細ページに表示するためのrender パーシャルを表示 comments/_index.html.erb -->
    <%= render partial: 'comments/index', locals: { comments: @comments, trip: @trip } %>
  </div>
  <!-- コメント入力欄をブログの詳細ページに表示するためのrender パーシャルを表示 comments/_form.html.erb -->
  <%= render partial: 'comments/form', locals: { comment: @comment, trip: @trip } %>
</div>

<%= link_to 'Edit', edit_trip_path(@trip) %> |
<%= link_to 'Back', trips_path %>
</div>
